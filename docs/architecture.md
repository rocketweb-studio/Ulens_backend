1.В папке src/modules будут папки с модулями Blog, Post, Comment и тд
2.core.module.ts будет принимать в imports и провайдить провайдить наши сторонние модули Prisma, GraphQL и тд 
    в main.module.ts

# Архитектура проекта Ulens_backend

## Общая структура

Проект построен на основе **NestJS** с использованием **монорепозитория** (monorepo) архитектуры. Это означает, что в одном репозитории содержится несколько независимых приложений, которые могут работать как отдельно, так и вместе.

## Структура папок

### Корневая директория
- **`apps/`** - основная папка с приложениями
- **`docs/`** - документация проекта
- **`dist/`** - скомпилированные файлы
- **`node_modules/`** - зависимости проекта

### Приложения (apps/)

В архитектуре данного проекта используется подход API GATEWAY.
Приложение **`/apps/gateway`** является точкой входа, и занимается основной маршрутизацией.
Остальные приложения в папке **`/apps`** являются микросервисами.

#### 1. **`apps/gateway/`** - API Gateway (Точка входа)

- **`src/`** - исходный код
  - **`core/`** - ядро приложения (конфигурация, базовые зависимости, переменные окружения)
    - **`env-config/`** - конфигурация переменных окружения
    - **`core.module.ts`** - основной модуль ядра
    - **`core.config.ts`** - конфигурация ядра
  - **`microservices/`** - клиенты микросервисов
    - **`auth/`** - клиент сервиса аутентификации
      - **`auth-client.config.ts`** - конфигурация подключения к auth-сервису
      - **`auth-client.module.ts`** - модуль клиента аутентификации
      - **`auth-client.service.ts`** - сервис для взаимодействия с auth-сервисом
      - **`auth-client.controller.ts`** - HTTP-контроллер для auth-запросов
      - **`auth-client.interface.ts`** - интерфейсы и типы данных
    - ...
    - ...
    - ...
  - **`gateway.module.ts`** - главный модуль Gateway
  - **`init-app.ts`** - инициализация приложения
  - **`main.ts`** - точка входа
- **`test/`** - тесты
- **`utils/`** - утилиты
- **`Dockerfile`** - контейнеризация
- **`Jenkinsfile`** - CI/CD конфигурация
- **`deployment.yaml`** - конфигурация развертывания
- **`preparingDeploy.sh`** - скрипт подготовки к развертыванию

#### 2. **`apps/...`** - Микрсервисы

Все микросервисы придерживаются следующей архитектуры:

- **`src/`** - исходный код
  - **`core/`** - ядро приложения(конфигурация, базовые зависимости, Prisma, GraphQL, сторонние сервисы)
    - **`prisma/`** - модуль для работы с базой данных
    - **`graphql/`** - модуль для работы с graphql
    - **`env-config/`** - конфигурация окружения
    - **`core.module.ts`** - основной модуль ядра
    - **`core.config.ts`** - конфигурация ядра
  - **`modules/`** - бизнес-модули
    - **`posts/`** - модуль для работы с постами(бизнес сущность)
    - **`blogs/`** - модуль для работы с блогами(бизнес сущность)
    - ...
    - ...
  - **`app.module.ts`** - главный модуль, обязательно принимает в imports CoreModule и другие бизнес-модули.
  - **`init-app.ts`** - инициализация приложения
  - **`main.ts`** - точка входа
- **`test/`** - тесты
- **`utils/`** - утилиты
- **`Dockerfile`** - контейнеризация
- **`Jenkinsfile`** - CI/CD конфигурация
- **`deployment.yaml`** - конфигурация развертывания
- **`preparingDeploy.sh`** - скрипт подготовки к развертыванию

## Архитектурные принципы

### 1. **Модульная архитектура**
- Каждое приложение имеет свою собственную структуру
- Используется паттерн модулей NestJS
- Четкое разделение ответственности между компонентами

### 2. **Ядро (Core)**
- **`CoreModule`** - центральный модуль, который предоставляет базовые зависимости
- Включает конфигурацию окружения, Prisma, GraphQL и другие сторонние модули
- Экспортирует общие сервисы для использования в других модулях

### 3. **Конфигурация**
- Используется система конфигурации на основе переменных окружения
- Валидация конфигурации через `class-validator`
- Централизованное управление базовыми настройками через `CoreEnvConfig`

### 4. **Микросервисная архитектура**
- Каждое приложение может работать независимо
- Возможность горизонтального масштабирования
- Изолированные контейнеры для каждого сервиса
